<!DOCTYPE html>
<html lang="">
    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<title>
ggseg3d - creating interactive brain segmentation plots with plotly - Dr. Mowinckel&#39;s
</title>



        <meta property="og:title" content="ggseg3d - creating interactive brain segmentation plots with plotly - Dr. Mowinckel&#39;s" />
<meta property="og:type" content="website" />
<meta property="og:description" content=""/>
<meta property="og:url" content="/blog/2019-12-06-ggseg3d-creating-interactive-brain-segmentation-plots-with-plotly/"/>
<meta property="og:site_name" content="Dr. Mowinckel&#39;s"/>



<meta property="og:image" content="/blog/2019-12-06-ggseg3d-creating-interactive-brain-segmentation-plots-with-plotly/ggseg3d_still.png"/>



        
<link rel="shortcut icon" href="/img/fav.ico.png">


        





<link rel="stylesheet" href="/css/main.min.5c5478bdd5363758f3e73657d5339b1ac7c131a401ffc3338edd7eb5e1a0114e.css" integrity="sha256-XFR4vdU2N1jz5zZX1TObGsfBMaQB/8Mzjt1&#43;teGgEU4=" crossorigin="anonymous" media="screen">




    <link rel="stylesheet" href="/syntax.css" integrity="" crossorigin="anonymous" media="screen">
    <link rel="stylesheet" href="/custom-style.css" integrity="" crossorigin="anonymous" media="screen">
    <link rel="stylesheet" href="/hexagongrid.css" integrity="" crossorigin="anonymous" media="screen">

        
        
        
        
    </head>
    <body> 
        <section id="top" class="section">
            
            <div class="container hero  fade-in one " style="background-size: contain;">
                

    <h1 class="bold-title is-1">Blog</h1>


            </div>
            
            <div class="section  fade-in two ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
            
            
            <a class="navbar-item" href="/">main</a>
            

            
            

            
                
            

            
                
            

            
            
            
            
            
            <a class="navbar-item" href="/#about">About me</a>
            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="/projects/">
                  
                  Project
                  
                  </a>
                
                
            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="/blog/">
                  
                  Back to Blog
                  
                  </a>
                
                
            
            
            
            

            
            
            <a class="navbar-item" href="/#contact">Contact</a>
            
            

            

            
            
        </div>
    </nav>
    <hr>
</div>



                
    <div class="container">
        <h2 class="title is-1 top-pad strong-post-title">
            <a href="/blog/2019-12-06-ggseg3d-creating-interactive-brain-segmentation-plots-with-plotly/">ggseg3d - creating interactive brain segmentation plots with plotly</a>
        </h2>
        <div class="post-data">
            Dec 6, 2019 |
            3 minutes read
        </div>
        
        
        
        <p>
            Tags:
            
            <a href="/tags/packages">Packages</a>,
            
            <a href="/tags/plots">Plots</a>
            
        </p>
        
    </div>
    
    <div class="container markdown top-pad">
        

<p>Looking through my blogposts, I realised I&rsquo;ve never written about my colleague Didac and my package for 3d mesh plots of brain atlases using plotly.
I&rsquo;ve already showed some functionality from out {ggseg}-package, <a href="blog/introducing-the-ggseg-r-package-for-brain-segmentations/">in the introductory blogpost</a> and <a href="blog/get-the-brain-animated/">follow-up on animating it</a>.</p>

<p>I guess it&rsquo;s extra timely to do it now, as we recently split the mesh-plot function off the main {ggseg}-package and into it&rsquo;s own package, and also did some re-writing of core-functionality of the package.
Like the {ggseg}-package, {ggseg3d} is made to plot brain atlas data.
In Neuroimaging, it is quite common to use these pre-defined areas of the brain, defined through functional or structural qualitites.
Since the brain has three dimensions, we thought it would be neat to actually have a plot where you would actually look at the brain at all angles, and also be able to interact with it.</p>

<p>So started my long and arduous search for tri-surface mesh plots, and plotly became the obvious candidate.
I had little to no experience with plotly, or with mesh-plots, so it was a real struggle.
But I&rsquo;m happy I stuck with it, and managed to make a tool that I now am really proud of.
There are still lots of things to improve, but I believe the core-funcitonality is in place now, and everything else is a bonus!</p>

<h1 id="get-3d-plotting">Get 3d-plotting</h1>

<p>{ggseg3d} can be installed from our works github account, using remotes</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="n">remotes</span><span class="o">::</span><span class="nf">install_github</span><span class="p">(</span><span class="s">&#34;LCBC-UiO/ggseg3d&#34;</span><span class="p">)</span></code></pre></div>
<p>And off the bat, it should be fairly easy to use, or atleast make the first plot.</p>
<div class="highlight"><pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">ggseg3d</span><span class="p">)</span>
<span class="nf">ggseg3d</span><span class="p">()</span></code></pre></div>
<p><!--html_preserve--><iframe src="ggseg_1_widget.html" width="100%" height="500px"></iframe><!--/html_preserve--></p>

<p>It plots the right hemisphere of the <code>dkt_3d</code> dataset, which is the Desikan-Killany atlas, a Freesurfer default.
You can easily interact with the plot, turn it, pan it, swivel it.
Have at it, have fun!</p>

<p>The function takes several arguments:</p>
<pre><code>.data	
A data.frame to use for plot aesthetics. Must include a column called &#34;area&#34; corresponding to areas.

atlas	
Either a string with the name of a 3d atlas to use.

surface	
String. Which surface to plot. Either &#34;pial&#34;,&#34;white&#34;, or &#34;inflated&#34;[default]

hemisphere	
String. Hemisphere to plot. Either &#34;left&#34; or &#34;right&#34;[default], can also be &#34;subcort&#34;.

label	
String. Quoted name of column in atlas/data that should be used to name traces

text	
String. Quoated name of column in atlas/data that should be added as extra information in the hover text.

colour	
String. Quoted name of column from which colour should be supplied

palette	
String. Either name of paletteer palette or vector of hex colours, used if colour is numeric.

na.colour	
String. Either name, hex of RGB for colour of NA in colour.

na.alpha	
Numeric. A number between 0 and 1 to control transparency of NA-regions.

show.legend	
Logical. Toggle legend if colour is numeric.</code></pre>
<p><img src="ggseg3d_still.png" alt="" /></p>

    </div>
    
    
    <div class="disqus">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "drmowinckels-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>



                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        Athanasia Monika Mowinckel CC-BY 2020. Feeding to <a href="https://rweekly.org">R weekly</a>. See the sites <a href="/cookies/cookies">cookie policy</a>.
    
    </div>
</div>

                
            </div>
        </section>
        
        


<script src="/js/bundle.e6934e69d06bb8a213134f4c1468f9478bb7755e786dfb60e3c5a917c5335805.js" integrity="sha256-5pNOadBruKITE09MFGj5R4u3dV54bftg48WpF8UzWAU="></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-115545202-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


        
        
        
        
    </body>
</html>
